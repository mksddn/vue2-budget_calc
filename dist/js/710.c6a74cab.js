"use strict";(self["webpackChunkvue_crm"]=self["webpackChunkvue_crm"]||[]).push([[710],{4710:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var r=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"page-title"},[e("h3",[t._v("Планирование")]),e("h4",[t._v(t._s(t._f("currency")(t.info.bill,"RUB")))])]),t.loading?e("LoaderItem"):t.categories.length?e("section",t._l(t.categories,(function(s){return e("div",{key:s.id},[e("p",[e("strong",[t._v(t._s(s.title)+":")]),t._v(" "+t._s(t._f("currency")(s.spend))+" из "+t._s(t._f("currency")(s.limit))+" ")]),e("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.tooltip,expression:"cat.tooltip"}],staticClass:"progress"},[e("div",{staticClass:"determinate",class:[s.progressColor],style:{width:s.progressPercent+"%"}})])])})),0):e("p",{staticClass:"center"},[t._v("Категорий пока нет. "),e("router-link",{attrs:{to:{path:"categories"}}},[t._v("Добавить новую категорию")])],1)],1)},i=[],o=s(3822),a=s(379),n={data(){return{loading:!0,categories:[]}},computed:{...(0,o.Se)(["info"])},async mounted(){const t=await this.$store.dispatch("fetchRecords"),e=await this.$store.dispatch("fetchCategories");this.categories=e.map((e=>{const s=t.filter((t=>t.categoryId===e.id)).filter((t=>"outcome"===t.type)).reduce(((t,e)=>t+ +e.amount),0),r=100*s/e.limit,i=r>100?100:r,o=r<60?"green":r<100?"orange":"red",n=e.limit-s,c=`${n<0?"Превышение на":"осталось"} ${(0,a.Z)(Math.abs(n))}`;return{...e,progressPercent:i,progressColor:o,spend:s,tooltip:c}})),this.loading=!1}},c=n,l=s(1001),u=(0,l.Z)(c,r,i,!1,null,null,null),d=u.exports}}]);
//# sourceMappingURL=710.c6a74cab.js.map