"use strict";(self["webpackChunkvue_crm"]=self["webpackChunkvue_crm"]||[]).push([[592],{592:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"page-title"},[e("h3",[t._v(t._s(t._f("localize")("Menu_Planning")))]),e("h4",[t._v(t._s(t._f("currency")(t.info.bill,"RUB")))])]),t.loading?e("LoaderItem"):t.categories.length?e("section",t._l(t.categories,(function(s){return e("div",{key:s.id},[e("p",[e("strong",[t._v(t._s(s.title)+":")]),t._v(" "+t._s(t._f("currency")(s.spend))+" "+t._s(t._f("localize")("Of"))+" "+t._s(t._f("currency")(s.limit))+" ")]),e("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.tooltip,expression:"cat.tooltip"}],staticClass:"progress"},[e("div",{staticClass:"determinate",class:[s.progressColor],style:{width:s.progressPercent+"%"}})])])})),0):e("p",{staticClass:"center"},[t._v(t._s(t._f("localize")("NoCategories"))+". "),e("router-link",{attrs:{to:{path:"categories"}}},[t._v(t._s(t._f("localize")("AddFirst")))])],1)],1)},r=[],o=s(3822),a=s(379),n={metaInfo(){return{title:this.$title("Menu_Planning")}},data(){return{loading:!0,categories:[]}},computed:{...(0,o.Se)(["info"])},async mounted(){const t=await this.$store.dispatch("fetchRecords"),e=await this.$store.dispatch("fetchCategories");this.categories=e.map((e=>{const s=t.filter((t=>t.categoryId===e.id)).filter((t=>"outcome"===t.type)).reduce(((t,e)=>t+ +e.amount),0),i=100*s/e.limit,r=i>100?100:i,o=i<60?"green":i<100?"orange":"red",n=e.limit-s,l=`${n<0?"Превышение на":"осталось"} ${(0,a.Z)(Math.abs(n))}`;return{...e,progressPercent:r,progressColor:o,spend:s,tooltip:l}})),this.loading=!1}},l=n,c=s(1001),u=(0,c.Z)(l,i,r,!1,null,null,null),d=u.exports}}]);
//# sourceMappingURL=592.7ed3ff2c.js.map